$("#modal").html("<%= j (render partial: 'shared/modal', locals:{ size: '', content: 'form' } ) %>")

document.querySelector('#form-person-profile #assignments_profile_assignated_id').disabled = true
document.querySelector('#form-person-profile #assignments_profile_profile_id').disabled = true

$("#modal").modal('show')

$("#form-person-profile").on("ajax:success", function(event) {
    profiles_table.ajax.reload(null,false)
    let msg = JSON.parse(event.detail[2].response)
    noty_alert(msg.status, msg.msg)
    $("#modal").modal('hide')
  }).on("ajax:error", function(event) {
	let msg = JSON.parse( event.detail[2].response )
	$.each( msg, function( key, value ) {
    if ( key == 'start_date' ) {
      $(`#form-person-profile #${key}`).addClass('is-invalid')
    } else if ( key == 'uniqueness' ) {
      $('#form-person-profile #msg_errors').hide(500)
      $('#form-person-profile #msg_errors').empty()
      $('#form-person-profile #msg_errors').append( value )
      $('#form-person-profile #msg_errors').show('slow')
    } else {
      $(`#form-person-profile #${key}_id`).addClass('is-invalid')
    }
    document.querySelector(`#form-person-profile .${key}`).innerHTML = value
  })
})